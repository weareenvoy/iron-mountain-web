---
description: Component creation rules for Virgin Galactic
globs: '**/*.tsx,**/*.jsx'
alwaysApply: false
---

---

description: Component creation guidelines globs: _.tsx, _.jsx, _.css, _.js, \*.ts

---

## Component Structure

1. **Client Components**
   - Add 'use client' directive for client components

   ```tsx
   'use client';

   import { useState } from 'react';
   ```

2. **Next.js Scope**
   - Don't import React from react directly as its not needed in Next.js
   - Prefer Tree shaking from react instead

   ```tsx
   import { useCallback, type MouseEvent } from 'react';
   ```

3. **Props Interface**
   - Define props interface at the top of the file
   - Extend HTML attributes when appropriate
   - Use proper type imports

   ```tsx
   import type { ComponentProps } from 'react';

   interface ButtonProps extends ComponentProps<'button'> {
     variant?: 'primary' | 'secondary';
     size?: 'sm' | 'md' | 'lg';
   }
   ```

4. **React 19 Ref Handling**
   - In React 19, ref is passed as a regular prop (no forwardRef needed)

   ```tsx
   // Old pattern (React 18)
   // const Button = forwardRef<HTMLButtonElement, ButtonProps>(...)

   // New pattern (React 19)
   function Button({ ref, variant = 'primary', ...props }: ButtonProps & { ref?: React.Ref<HTMLButtonElement> }) {
     return <button ref={ref} {...props} />;
   }
   ```

5. **Default Exports**
   - Use arrow function declarations for components
   - Export the component as default

   ```tsx
   const Button = ({ variant = 'primary', size = 'md', ...props }: ButtonProps) => {
     // component logic
   };

   export default Button;
   ```

## Performance Best Practices

1. **Code Splitting**
   - Use `next/dynamic` for heavy components

   ```tsx
   import dynamic from 'next/dynamic';

   const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
     loading: () => <div>Loading...</div>,
     ssr: false, // if needed
   });
   ```

3. **Memoization and React Compiler**
   - The React Compiler is enabled in this project and automatically optimizes most component re-renders and
     memoization.
   - **Avoid manual use of `useMemo`, `useCallback`, and `React.memo` unless you have a proven edge case** (e.g.,
     non-serializable dependencies, refs, or when the compiler cannot optimize).
   - Refer to the [React Compiler documentation](mdc:https:/react.dev/reference/react/compiler) for best practices and
     up-to-date guidance.

## Error Handling

1. **Error Boundaries**
   - Implement error boundaries for critical sections
   - Provide meaningful fallback UI

2. **Loading States**
   - Always handle loading states
   - Use Suspense boundaries where appropriate
